(()=>{typeof window.jQuery!="undefined"&&window.jQuery.datepicker&&window.jQuery.datepicker.setDefaults({onSelect:function(o,e){let t=e&&e.input&&e.input.get(0);t&&t.dispatchEvent(new Event("input",{bubbles:!0}))}});typeof window!="undefined"&&window.addEventListener("pageshow",()=>{document.querySelectorAll('[type="file"]').forEach(e=>e.value="");let o=document.querySelector('.row.submit_btn input[type="submit"]');o&&(o.disabled=!1)});function m(o){let e=document.querySelector(`[name="${o}"]`);if(e)return e;let t=document.querySelector(`#file_view_${o}`);if(t)return t;let a=document.querySelectorAll("li.label"),u=new RegExp(`^${o}$`),g=Array.from(a).filter(p=>u.test(p.innerText))[0];return g||null}function i(o,e){o.forEach(t=>{let a=t.selector,u=t.required&&e;if(!a){console.error("[toggleDisplay] targets\u306Eselector\u306F\u5FC5\u9808\u3067\u3059",t);return}let g=m(a);if(g==null){console.error("[toggleDisplay] targets\u306Eselector\u8981\u7D20\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093",t);return}if(g.className==="label"){g.style.display=e?"":"none";return}let p=g.closest("li.clr");if(p==null){console.error("[toggleDisplay] targets\u306E\u89AA\u8981\u7D20\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093",t);return}p.style.display=e?"":"none";let l=p.querySelector("label.col.span_3");l&&l.classList.toggle("required",u!=null?u:!1);let s=p.querySelector('[type="file"], [type="number"], [type="password"], [type="radio"], [type="text"], select, textarea');s&&(s.required=u!=null?u:!1);let c=Array.from(p.querySelectorAll('[type="checkbox"]'));c.forEach(r=>{r.removeEventListener("change",r._toggleDisplayChangeHandler),r._toggleDisplayChangeHandler=()=>{let n=p.querySelector('[type="checkbox"]:checked')!==null;c.forEach(d=>d.required=!n)},r.addEventListener("change",r._toggleDisplayChangeHandler)})})}function h(o){if(!o){console.error("[toggleDisplay] \u5F15\u6570\u306F\u5FC5\u9808\u3067\u3059");return}let{source:e,targets:t}=o;if(!e){console.error("[toggleDisplay] source\u306F\u5FC5\u9808\u3067\u3059",o);return}if(!e.selector){console.error("[toggleDisplay] source\u306Eselector\u306F\u5FC5\u9808\u3067\u3059",o);return}if(!t||!Array.isArray(t)||t.length===0){console.error("[toggleDisplay] targets\u306F\u5FC5\u9808\u3067\u3059",o);return}if(t.some(l=>!l.selector)){console.error("[toggleDisplay] targets\u306Eselector\u306F\u5FC5\u9808\u3067\u3059",o);return}let a=m(e.selector);if(a==null){console.error("[toggleDisplay] source\u306Eselector\u8981\u7D20\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093",o);return}if(/wf\d+-(pf|ct)/.test(e.selector)){let l=Object.getOwnPropertyDescriptor(a,"value");if(l&&l.configurable===!1)return;let s=e.selector.endsWith("-pf"),c=s?HTMLSelectElement.prototype:HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(c,"value");r&&r.set&&Object.defineProperty(a,"value",{get(){var n;return(n=r.get)==null?void 0:n.call(this)},set(n){var y,E;let d=(y=r.get)==null?void 0:y.call(this);(E=r.set)==null||E.call(this,n);let f=s?"change":"input";n!==d&&this.dispatchEvent(new Event(f,{bubbles:!0}))}})}let u=a.type,g=a.tagName.toLowerCase(),p=a.id;if(g==="select"){let l=e.values?e.values:[];if(l.length>0){let s=new RegExp(`^(${l.join("|")})$`);i(t,s.test(String(a.value))),a.addEventListener("change",c=>{let r=c.target;i(t,r?s.test(r.value):!1)})}else i(t,!1)}else if(g==="p"&&/^file_view_/.test(p)){i(t,!1);let l=new MutationObserver(r=>{r.forEach(n=>{let{target:d,type:f}=n,{firstElementChild:y}=d;i(t,!!(f==="childList"&&y))})}),s={childList:!0,subtree:!0};l.observe(a,s);let c=()=>{l.disconnect()};typeof window!="undefined"&&window.addEventListener("beforeunload",c)}else if(u==="checkbox"){let l=e.values?e.values:[];if(l.length>0){let s=new RegExp(`^(${l.join("|")})$`),c=()=>{let n=document.querySelectorAll(`[name="${e.selector}"]:checked`),f=Array.from(n).map(y=>y.value).some(y=>s.test(y));i(t,f)};c(),document.querySelectorAll(`[name="${e.selector}"]`).forEach(n=>{n.removeEventListener("change",n._toggleDisplayChangeHandler),n._toggleDisplayChangeHandler=()=>{c()},n.addEventListener("change",n._toggleDisplayChangeHandler)})}else i(t,!1)}else if(u==="radio"){let l=e.values?e.values:[];if(l.length>0){let s=new RegExp(`^(${l.join("|")})$`),c=document.querySelector(`[name="${e.selector}"]:checked`);i(t,c?s.test(c.value):!1),document.querySelectorAll(`[name="${e.selector}"]`).forEach(n=>{n.removeEventListener("change",n._toggleDisplayChangeHandler),n._toggleDisplayChangeHandler=d=>{let f=d.target;i(t,f?s.test(f.value):!1)},n.addEventListener("change",n._toggleDisplayChangeHandler)})}else i(t,!1)}else i(t,String(a.value).length>0),a.addEventListener("input",l=>{let s=l.target;i(t,s?String(s.value).length>0:!1)})}function v(){return"1.0.1"}typeof window!="undefined"&&(window.toggleDisplay=h,window.toggleDisplayVersion=v);})();
