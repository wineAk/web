(()=>{typeof window.jQuery!="undefined"&&window.jQuery.datepicker&&window.jQuery.datepicker.setDefaults({onSelect:function(a,t){let e=t&&t.input&&t.input.get(0);e&&e.dispatchEvent(new Event("input",{bubbles:!0}))}});function m(a){let t=document.querySelector(`[name="${a}"]`);if(t)return t;let e=document.querySelector(`#file_view_${a}`);if(e)return e;let o=document.querySelectorAll("li.label"),u=new RegExp(`^${a}$`),g=Array.from(o).filter(p=>u.test(p.innerText))[0];return g||null}function i(a,t){a.forEach(e=>{let o=e.selector,u=e.required&&t;if(!o){console.error("[toggleDisplay] targets\u306Eselector\u306F\u5FC5\u9808\u3067\u3059",e);return}let g=m(o);if(g==null){console.error("[toggleDisplay] targets\u306Eselector\u8981\u7D20\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093",e);return}if(g.className==="label"){g.style.display=t?"":"none";return}let p=g.closest("li.clr");if(p==null){console.error("[toggleDisplay] targets\u306E\u89AA\u8981\u7D20\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093",e);return}p.style.display=t?"":"none";let s=p.querySelector("label.col.span_3");s&&s.classList.toggle("required",u!=null?u:!1);let l=p.querySelector('[type="number"], [type="password"], [type="radio"], [type="text"], select, textarea');l&&(l.required=u!=null?u:!1);let c=Array.from(p.querySelectorAll('[type="checkbox"]'));c.forEach(r=>{r.removeEventListener("change",r._toggleDisplayChangeHandler),r._toggleDisplayChangeHandler=()=>{let n=p.querySelector('[type="checkbox"]:checked')!==null;c.forEach(d=>d.required=!n)},r.addEventListener("change",r._toggleDisplayChangeHandler)})})}function h(a){if(!a){console.error("[toggleDisplay] \u5F15\u6570\u306F\u5FC5\u9808\u3067\u3059");return}let{source:t,targets:e}=a;if(!t){console.error("[toggleDisplay] source\u306F\u5FC5\u9808\u3067\u3059",a);return}if(!t.selector){console.error("[toggleDisplay] source\u306Eselector\u306F\u5FC5\u9808\u3067\u3059",a);return}if(!e||!Array.isArray(e)||e.length===0){console.error("[toggleDisplay] targets\u306F\u5FC5\u9808\u3067\u3059",a);return}if(e.some(s=>!s.selector)){console.error("[toggleDisplay] targets\u306Eselector\u306F\u5FC5\u9808\u3067\u3059",a);return}let o=m(t.selector);if(o==null){console.error("[toggleDisplay] source\u306Eselector\u8981\u7D20\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093",a);return}if(/wf\d+-(pf|ct)/.test(t.selector)){let s=Object.getOwnPropertyDescriptor(o,"value");if(s&&s.configurable===!1)return;let l=t.selector.endsWith("-pf"),c=l?HTMLSelectElement.prototype:HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(c,"value");r&&r.set&&Object.defineProperty(o,"value",{get(){var n;return(n=r.get)==null?void 0:n.call(this)},set(n){var f,E;let d=(f=r.get)==null?void 0:f.call(this);(E=r.set)==null||E.call(this,n);let y=l?"change":"input";n!==d&&this.dispatchEvent(new Event(y,{bubbles:!0}))}})}let u=o.type,g=o.tagName.toLowerCase(),p=o.id;if(g==="select"){let s=t.values?t.values:[];if(s.length>0){let l=new RegExp(`^(${s.join("|")})$`);i(e,l.test(String(o.value))),o.addEventListener("change",c=>{let r=c.target;i(e,r?l.test(r.value):!1)})}else i(e,!1)}else if(g==="p"&&/^file_view_/.test(p)){i(e,!1);let s=new MutationObserver(r=>{r.forEach(n=>{let{target:d,type:y}=n,{firstElementChild:f}=d;i(e,!!(y==="childList"&&f))})}),l={childList:!0,subtree:!0};s.observe(o,l);let c=()=>{s.disconnect()};typeof window!="undefined"&&window.addEventListener("beforeunload",c)}else if(u==="checkbox"){let s=t.values?t.values:[];if(s.length>0){let l=new RegExp(`^(${s.join("|")})$`),c=()=>{let n=document.querySelectorAll(`[name="${t.selector}"]:checked`),y=Array.from(n).map(f=>f.value).some(f=>l.test(f));i(e,y)};c(),document.querySelectorAll(`[name="${t.selector}"]`).forEach(n=>{n.removeEventListener("change",n._toggleDisplayChangeHandler),n._toggleDisplayChangeHandler=()=>{c()},n.addEventListener("change",n._toggleDisplayChangeHandler)})}else i(e,!1)}else if(u==="radio"){let s=t.values?t.values:[];if(s.length>0){let l=new RegExp(`^(${s.join("|")})$`),c=document.querySelector(`[name="${t.selector}"]:checked`);i(e,c?l.test(c.value):!1),document.querySelectorAll(`[name="${t.selector}"]`).forEach(n=>{n.removeEventListener("change",n._toggleDisplayChangeHandler),n._toggleDisplayChangeHandler=d=>{let y=d.target;i(e,y?l.test(y.value):!1)},n.addEventListener("change",n._toggleDisplayChangeHandler)})}else i(e,!1)}else i(e,String(o.value).length>0),o.addEventListener("input",s=>{let l=s.target;i(e,l?String(l.value).length>0:!1)})}function v(){return"1.0.0"}typeof window!="undefined"&&(window.toggleDisplay=h,window.toggleDisplayVersion=v);})();
