(()=>{jQuery.datepicker.setDefaults({onSelect:function(o,e){let t=e&&e.input&&e.input.get(0);t&&t.dispatchEvent(new Event("input",{bubbles:!0}))}});function y(o){let e=document.querySelector(`[name="${o}"]`);if(e)return e;let t=document.querySelector(`#file_view_${o}`);if(t)return t;let s=document.querySelectorAll("li.label"),u=Array.from(s).filter(i=>i.innerText===o)[0];return u||null}function g(o,e){o.forEach(t=>{let s=t.selector,u=t.required&&e;if(!s){console.error("[toggleDisplay] targets\u306Eselector\u306F\u5FC5\u9808\u3067\u3059",t);return}let i=y(s);if(i==null){console.error("[toggleDisplay] targets\u306Eselector\u8981\u7D20\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093",t);return}if(i.className==="label"){i.style.display=e?"":"none";return}let m=i.closest("li.clr");if(m==null){console.error("[toggleDisplay] targets\u306E\u89AA\u8981\u7D20\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093",t);return}m.style.display=e?"":"none";let n=m.querySelector("label.col.span_3");n&&n.classList.toggle("required",u!=null?u:!1);let l=m.querySelector('[type="number"], [type="password"], [type="radio"], [type="text"], select, textarea');l&&(l.required=u!=null?u:!1);let c=Array.from(m.querySelectorAll('[type="checkbox"]'));c.forEach(a=>{a.addEventListener("change",()=>{let r=m.querySelector('[type="checkbox"]:checked')!==null;c.forEach(p=>p.required=!r)})})})}function h(o){if(!o){console.error("[toggleDisplay] \u5F15\u6570\u306F\u5FC5\u9808\u3067\u3059");return}let{source:e,targets:t}=o;if(!e){console.error("[toggleDisplay] source\u306F\u5FC5\u9808\u3067\u3059",o);return}if(!e.selector){console.error("[toggleDisplay] source\u306Eselector\u306F\u5FC5\u9808\u3067\u3059",o);return}if(!t||!Array.isArray(t)||t.length===0){console.error("[toggleDisplay] targets\u306F\u5FC5\u9808\u3067\u3059",o);return}if(t.some(n=>!n.selector)){console.error("[toggleDisplay] targets\u306Eselector\u306F\u5FC5\u9808\u3067\u3059",o);return}let s=y(e.selector);if(s==null){console.error("[toggleDisplay] source\u306Eselector\u8981\u7D20\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093",o);return}if(/wf\d+-(pf|ct)/.test(e.selector)){let n=Object.getOwnPropertyDescriptor(s,"value");if(n&&n.configurable===!1)return;let l=e.selector.endsWith("-pf"),c=l?HTMLSelectElement.prototype:HTMLInputElement.prototype,a=Object.getOwnPropertyDescriptor(c,"value");a&&a.set&&Object.defineProperty(s,"value",{get(){var r;return(r=a.get)==null?void 0:r.call(this)},set(r){var E,d;let p=(E=a.get)==null?void 0:E.call(this);(d=a.set)==null||d.call(this,r);let f=l?"change":"input";r!==p&&this.dispatchEvent(new Event(f,{bubbles:!0}))}})}let u=s.type,i=s.tagName.toLowerCase(),m=s.id;if(i==="select"){let n=e.values?e.values:[],l=new RegExp(`^(${n.join("|")})$`);g(t,l.test(String(s.value))),s.addEventListener("change",c=>{let a=c.target;g(t,a?l.test(a.value):!1)})}else if(i==="p"&&/^file_view_/.test(m)){g(t,!1);let n=new MutationObserver(c=>{c.forEach(a=>{let{target:r,type:p}=a,{firstElementChild:f}=r;g(t,!!(p==="childList"&&f))})}),l={childList:!0,subtree:!0};n.observe(s,l)}else if(u==="checkbox"){let n=e.values?e.values:[],l=new RegExp(`^(${n.join("|")})$`),c=()=>{let r=document.querySelectorAll(`[name=${e.selector}]:checked`),f=Array.from(r).map(E=>E.value).some(E=>l.test(E));g(t,f)};c(),document.querySelectorAll(`[name=${e.selector}]`).forEach(r=>{r.addEventListener("change",p=>{c()})})}else if(u==="radio"){let n=e.values?e.values:[],l=new RegExp(`^(${n.join("|")})$`),c=document.querySelector(`[name=${e.selector}]:checked`);g(t,c?l.test(c.value):!1),document.querySelectorAll(`[name=${e.selector}]`).forEach(r=>{r.addEventListener("change",p=>{let f=p.target;g(t,f?l.test(f.value):!1)})})}else g(t,String(s.value).length>0),s.addEventListener("input",n=>{let l=n.target;g(t,l?String(l.value).length>0:!1)})}function v(){return"1.0.0"}typeof window!="undefined"&&(window.toggleDisplay=h,window.toggleDisplayVersion=v);})();
