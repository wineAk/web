(()=>{typeof window.jQuery!="undefined"&&window.jQuery.datepicker&&window.jQuery.datepicker.setDefaults({onSelect:function(a,t){let e=t&&t.input&&t.input.get(0);e&&e.dispatchEvent(new Event("input",{bubbles:!0}))}});function m(a){let t=document.querySelector(`[name="${a}"]`);if(t)return t;let e=document.querySelector(`#file_view_${a}`);if(e)return e;let r=document.querySelectorAll("li.label"),u=new RegExp(`^${a}$`),g=Array.from(r).filter(p=>u.test(p.innerText))[0];return g||null}function i(a,t){a.forEach(e=>{let r=e.selector,u=e.required&&t;if(!r){console.error("[toggleDisplay] targets\u306Eselector\u306F\u5FC5\u9808\u3067\u3059",e);return}let g=m(r);if(g==null){console.error("[toggleDisplay] targets\u306Eselector\u8981\u7D20\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093",e);return}if(g.className==="label"){g.style.display=t?"":"none";return}let p=g.closest("li.clr");if(p==null){console.error("[toggleDisplay] targets\u306E\u89AA\u8981\u7D20\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093",e);return}p.style.display=t?"":"none";let l=p.querySelector("label.col.span_3");l&&l.classList.toggle("required",u!=null?u:!1);let n=p.querySelector('[type="number"], [type="password"], [type="radio"], [type="text"], select, textarea');n&&(n.required=u!=null?u:!1);let c=Array.from(p.querySelectorAll('[type="checkbox"]'));c.forEach(s=>{s.removeEventListener("change",s._toggleDisplayChangeHandler),s._toggleDisplayChangeHandler=()=>{let o=p.querySelector('[type="checkbox"]:checked')!==null;c.forEach(f=>f.required=!o)},s.addEventListener("change",s._toggleDisplayChangeHandler)})})}function h(a){if(!a){console.error("[toggleDisplay] \u5F15\u6570\u306F\u5FC5\u9808\u3067\u3059");return}let{source:t,targets:e}=a;if(!t){console.error("[toggleDisplay] source\u306F\u5FC5\u9808\u3067\u3059",a);return}if(!t.selector){console.error("[toggleDisplay] source\u306Eselector\u306F\u5FC5\u9808\u3067\u3059",a);return}if(!e||!Array.isArray(e)||e.length===0){console.error("[toggleDisplay] targets\u306F\u5FC5\u9808\u3067\u3059",a);return}if(e.some(l=>!l.selector)){console.error("[toggleDisplay] targets\u306Eselector\u306F\u5FC5\u9808\u3067\u3059",a);return}let r=m(t.selector);if(r==null){console.error("[toggleDisplay] source\u306Eselector\u8981\u7D20\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093",a);return}if(/wf\d+-(pf|ct)/.test(t.selector)){let l=Object.getOwnPropertyDescriptor(r,"value");if(l&&l.configurable===!1)return;let n=t.selector.endsWith("-pf"),c=n?HTMLSelectElement.prototype:HTMLInputElement.prototype,s=Object.getOwnPropertyDescriptor(c,"value");s&&s.set&&Object.defineProperty(r,"value",{get(){var o;return(o=s.get)==null?void 0:o.call(this)},set(o){var d,E;let f=(d=s.get)==null?void 0:d.call(this);(E=s.set)==null||E.call(this,o);let y=n?"change":"input";o!==f&&this.dispatchEvent(new Event(y,{bubbles:!0}))}})}let u=r.type,g=r.tagName.toLowerCase(),p=r.id;if(g==="select"){let l=t.values?t.values:[];if(l.length>0){let n=new RegExp(`^(${l.join("|")})$`);i(e,n.test(String(r.value))),r.addEventListener("change",c=>{let s=c.target;i(e,s?n.test(s.value):!1)})}else i(e,!1)}else if(g==="p"&&/^file_view_/.test(p)){i(e,!1);let l=new MutationObserver(c=>{c.forEach(s=>{let{target:o,type:f}=s,{firstElementChild:y}=o;i(e,!!(f==="childList"&&y))})}),n={childList:!0,subtree:!0};l.observe(r,n)}else if(u==="checkbox"){let l=t.values?t.values:[];if(l.length>0){let n=new RegExp(`^(${l.join("|")})$`),c=()=>{let o=document.querySelectorAll(`[name="${t.selector}"]:checked`),y=Array.from(o).map(d=>d.value).some(d=>n.test(d));i(e,y)};c(),document.querySelectorAll(`[name="${t.selector}"]`).forEach(o=>{o.addEventListener("change",f=>{c()})})}else i(e,!1)}else if(u==="radio"){let l=t.values?t.values:[];if(l.length>0){let n=new RegExp(`^(${l.join("|")})$`),c=document.querySelector(`[name="${t.selector}"]:checked`);i(e,c?n.test(c.value):!1),document.querySelectorAll(`[name="${t.selector}"]`).forEach(o=>{o.addEventListener("change",f=>{let y=f.target;i(e,y?n.test(y.value):!1)})})}else i(e,!1)}else i(e,String(r.value).length>0),r.addEventListener("input",l=>{let n=l.target;i(e,n?String(n.value).length>0:!1)})}function v(){return"1.0.0"}typeof window!="undefined"&&(window.toggleDisplay=h,window.toggleDisplayVersion=v);})();
